<!DOCTYPE html>
<html>
  <head>
    <title>Admin Panel - RedTech Tools</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/stylesheets/style.css" />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="/">RedTech Tools</a>
        <div class="navbar-nav">
          <a class="nav-link" href="/">Home</a>
          <a class="nav-link active" href="/admin">Admin</a>
          <a class="nav-link" href="/orders">Orders</a>
          <a class="nav-link" href="/auth/logout">Logout</a>
        </div>
      </div>
    </nav>
    <div class="container mt-4">
      <h1>Admin Panel</h1>

      <h2>Users</h2>
      <table class="table table-striped">
        <thead>
          <tr>
            <th>ID</th>
            <th>Username</th>
            <th>Email</th>
            <th>Admin</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <% users.forEach(user => { %>
          <tr>
            <td><%= user.id %></td>
            <td><%= user.username %></td>
            <td><%= user.email %></td>
            <td><%= user.isAdmin ? 'Yes' : 'No' %></td>
            <td>
              <form action="/admin/delete-user/<%= user.id %>" method="post">
                <button type="submit" class="btn btn-danger btn-sm">
                  Delete
                </button>
              </form>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>

      <h2>Products</h2>
      <table class="table table-striped">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Price</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <% products.forEach(product => { %>
          <tr>
            <td><%= product.id %></td>
            <td><%= product.name %></td>
            <td>$<%= product.price %></td>
            <td>
              <form
                action="/admin/delete-product/<%= product.id %>"
                method="post"
              >
                <button type="submit" class="btn btn-danger btn-sm">
                  Delete
                </button>
              </form>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>

      <h2>Reviews</h2>
      <table class="table table-striped">
        <thead>
          <tr>
            <th>ID</th>
            <th>Product ID</th>
            <th>User ID</th>
            <th>Comment</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <% reviews.forEach(review => { %>
          <tr>
            <td><%= review.id %></td>
            <td><%= review.productId %></td>
            <td><%= review.userId %></td>
            <td><%= review.comment %></td>
            <td>
              <form
                action="/admin/delete-review/<%= review.id %>"
                method="post"
              >
                <button type="submit" class="btn btn-danger btn-sm">
                  Delete
                </button>
              </form>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  </body>
</html>
